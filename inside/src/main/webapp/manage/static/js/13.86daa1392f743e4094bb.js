webpackJsonp([13],{213:function(e,t,n){"use strict";function a(e){n(267)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(269),o=n(270),l=n(78),c=a,i=l(r.a,o.a,!1,c,null,null);t.default=i.exports},219:function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"s",function(){return l}),n.d(t,"o",function(){return c}),n.d(t,"k",function(){return i}),n.d(t,"q",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return f}),n.d(t,"f",function(){return d}),n.d(t,"p",function(){return p}),n.d(t,"r",function(){return v}),n.d(t,"e",function(){return h}),n.d(t,"m",function(){return g}),n.d(t,"l",function(){return m}),n.d(t,"a",function(){return b}),n.d(t,"j",function(){return y}),n.d(t,"n",function(){return L}),n.d(t,"b",function(){return _}),n.d(t,"g",function(){return w}),n.d(t,"t",function(){return B}),n.d(t,"h",function(){return S});var a=n(46),r=window.INSIDE_BASE_URL,o=function(e){return a.a.post(r+"/app/performance/getPower",e).then(function(e){return e.data})},l=function(e){return a.a.post(r+"/app/performance/listTotal",e).then(function(e){return e.data})},c=function(e){return a.a.post(r+"/app/performance/listOrganize",e).then(function(e){return e.data})},i=function(e){return a.a.post(r+"/app/department/listAll",e).then(function(e){return e.data})},s=function(e){return a.a.post(r+"/app/staff/listByPage",e).then(function(e){return e.data})},u=function(e){return a.a.post(r+"/app/performance/addOrModifyDirectly",e).then(function(e){return e.data})},f=function(e){return a.a.post(r+"/app/performance/addOrModifyBranch",e).then(function(e){return e.data})},d=function(e){return a.a.post(r+"/app/performance/checkOwnInfo",e).then(function(e){return e.data})},p=function(e){return a.a.post(r+"/app/performance/listOwnInfo",e).then(function(e){return e.data})},v=function(e){return a.a.post(r+"/app/performance/listStaticInfo",e).then(function(e){return e.data})},h=function(e){return a.a.post(r+"/app/performance/addOwn",e).then(function(e){return e.data})},g=function(e){return a.a.post(r+"/app/performance/listDirectlyStaff",e).then(function(e){return e.data})},m=function(e){return a.a.post(r+"/app/performance/listDirectlyInfo",e).then(function(e){return e.data})},b=function(e){return a.a.post(r+"/app/performance/addDirectly",e).then(function(e){return e.data})},y=function(e){return a.a.post(r+"/app/performance/listBranchStaff",e).then(function(e){return e.data})},L=function(e){return a.a.post(r+"/app/performance/listLevelDict",e).then(function(e){return e.data})},_=function(e){return a.a.post(r+"/app/performance/addLevel",e).then(function(e){return e.data})},w=function(e){return a.a.post(r+"/app/performance/checkReleaseLevel",e).then(function(e){return e.data})},B=function(e){return a.a.post(r+"/app/performance/releaseLevel",e).then(function(e){return e.data})},S=function(){return Object(a.a)({method:"get",url:r+"/app/performance/exportExcel",responseType:"blob"}).then(function(e){return e.data})}},267:function(e,t,n){var a=n(268);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(202)("144aed4b",a,!0)},268:function(e,t,n){t=e.exports=n(201)(!1),t.push([e.i,".functioin-performace-branch .a-gt-own-span{font-size:14px;color:#666;display:block;padding:7px 20px 25px}.functioin-performace-branch .el-pagination{text-align:right;margin-top:25px}",""])},269:function(e,t,n){"use strict";var a=n(219);t.a={data:function(){return{listBranchStaffReq:{current:1,size:10},page:{totalNums:1,totalPages:1},branchStaffListData:[],addLevelReq:{staffId:"",staffName:"",level:""},levelData:[],releaseLevelBoolean:!1,gradeDialogBoolean:!1}},methods:{listBranchStaff:function(){var e=this;Object(a.j)(this.listBranchStaffReq).then(function(t){console.log(t);var n=t.code;100==n?(e.branchStaffListData=t.data,e.page.totalNums=t.page.totalNums,e.page.totalPages=t.page.totalPages,console.log(e.page)):e.$message.error(t.msg+"[错误码："+n+"]")})},listLevelDict:function(){var e=this;Object(a.n)().then(function(t){console.log(t);var n=t.code;100==n?(e.levelData=t.data,console.log(e.page)):e.$message.error(t.msg+"[错误码："+n+"]")})},addLevel:function(){var e=this;Object(a.b)(this.addLevelReq).then(function(t){console.log(t);var n=t.code;100==n?(e.$message({message:"评级成功",type:"success"}),e.listBranchStaff(),e.checkReleaseLevel()):e.$message.error(t.msg+"[错误码："+n+"]")})},checkReleaseLevel:function(){var e=this;Object(a.g)(this.addLevelReq).then(function(t){console.log(t);var n=t.code;100==n?e.releaseLevelBoolean=t.data:e.$message.error(t.msg+"[错误码："+n+"]")})},releaseLevel:function(){var e=this;this.$confirm("发布评级后将不可修改，相关人员也能看到对应评级，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.t)().then(function(t){console.log(t);var n=t.code;100==n?(e.$message({message:"发布评级成功",type:"success"}),e.listBranchStaff(),e.checkReleaseLevel()):e.$message.error(t.msg+"[错误码："+n+"]")})})},exportExcel:function(){Object(a.h)().then(function(e){var t=e,n=document.createElement("a");n.download="员工绩效评定表.xls",n.style.display="none";var a=new Blob([t]);n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),document.body.removeChild(n)})},handleCurrentChange:function(e){this.listBranchStaff()},handleSizeChange:function(e){this.listBranchStaffReq.size=e,this.listBranchStaff()},openStaffLevel:function(e){console.log("openStaffLevel"),this.addLevelReq.staffName=e.staffName,this.addLevelReq.staffId=e.staffId,this.addLevelReq.level=e.level,this.gradeDialogBoolean=!0,console.log(this.addLevelReq)},confim:function(){this.gradeDialogBoolean=!1,this.addLevel()},releaseLevelClick:function(){this.releaseLevel()},exportExcelClick:function(){this.exportExcel()}},created:function(){this.listBranchStaff(),this.checkReleaseLevel(),this.listLevelDict()}}},270:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"functioin-performace-branch"},[n("div",[n("div",{staticStyle:{margin:"0px 0 10px"}},[n("el-button",{attrs:{type:"primary",disabled:0==e.releaseLevelBoolean},on:{click:e.releaseLevelClick}},[e._v("发布评级")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:0==e.releaseLevelBoolean},on:{click:e.exportExcelClick}},[e._v("导出数据")])],1),e._v(" "),n("span",{staticClass:"a-gt-own-span"},[e._v("本月分页员工绩效评级列表")]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.branchStaffListData,border:"","highlight-current-row":""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"staffName",label:"姓名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"staffCode",label:"编号"}}),e._v(" "),n("el-table-column",{attrs:{label:"自评总分"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(""==t.row.ownTotal||null==t.row.ownTotal?"暂未自评分":t.row.ownTotal))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"直属领导评分"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(""==t.row.directlyTotal||null==t.row.directlyTotal?"暂未评分":t.row.directlyTotal))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"评级"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(""==t.row.level||null==t.row.level?"请点击右侧按钮进行评级":t.row.level))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[""==t.row.ownTotal||null==t.row.ownTotal?n("span",[e._v("需员工完成自评分")]):""==t.row.directlyTotal||null==t.row.directlyTotal?n("span",[e._v("需员工直属领导完成评分")]):1==t.row.levelBoolean?n("span",[e._v("评级已完成")]):0==t.row.levelBoolean?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){e.openStaffLevel(t.row)}}},[e._v("评级")]):e._e()]}}])})],1)],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.listBranchStaffReq.current,"page-sizes":[10,20,50,100],"page-size":e.listBranchStaffReq.size,layout:"total, sizes, prev, pager, next",total:e.page.totalNums},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listBranchStaffReq,"current",t)}}}),e._v(" "),n("div",[n("el-dialog",{attrs:{title:e.addLevelReq.staffName+"评级",visible:e.gradeDialogBoolean},on:{"update:visible":function(t){e.gradeDialogBoolean=t}}},[n("el-select",{attrs:{placeholder:"请选择评级"},model:{value:e.addLevelReq.level,callback:function(t){e.$set(e.addLevelReq,"level",t)},expression:"addLevelReq.level"}},e._l(e.levelData,function(e){return n("el-option",{key:e.levelCode,attrs:{label:e.levelName,value:e.levelCode}})})),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.gradeDialogBoolean=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confim()}}},[e._v("确 定")])],1)],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};t.a=o}});