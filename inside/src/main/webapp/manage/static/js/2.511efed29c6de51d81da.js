webpackJsonp([2],{205:function(t,e,a){"use strict";function s(t){a(235)}Object.defineProperty(e,"__esModule",{value:!0});var f=a(237),i=a(239),n=a(78),l=s,o=n(f.a,i.a,!1,l,null,null);e.default=o.exports},235:function(t,e,a){var s=a(236);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(202)("ee23e1d4",s,!0)},236:function(t,e,a){e=t.exports=a(201)(!1),e.push([t.i,".organize-staff-stafflist .a-admin-head{padding:35px 0 35px 25px}.organize-staff-stafflist .a-admin-table{margin:0 25px 25px}.organize-staff-stafflist .el-pagination{float:right;margin-right:20px}",""])},237:function(t,e,a){"use strict";var s=a(238);e.a={data:function(){return{staffListReq:{staffSearch:"",staffStatus:0,current:1,size:10},page:{totalNums:1,totalPages:1},staffListData:[],staff:{id:0,staffCode:0,staffName:"",staffPhone:"",staffJoinTime:""},dialogOpe:{name:"员工信息",status:0},dialogStaffVisible:!1,formLabelWidth:"120px",statusOptions:[{value:"",label:"全部"},{value:0,label:"在职"},{value:1,label:"离职"}],departmentListData:[],listStaffTypeData:[],listStaffLevelData:[],listStaffDutiesData:[],staffRules:{staffName:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:8,message:"长度不超过8个字符",trigger:"blur"}],staffEnName:[{required:!1,message:"请输入英文名",trigger:"blur"},{min:1,max:15,message:"长度不超过15个字符",trigger:"blur"}],staffCode:[{required:!0,message:"请输入员工编号",trigger:"blur"},{min:1,max:15,message:"长度不超过15个字符",trigger:"blur"}],staffPhone:[{required:!0,message:"请选输入电话",trigger:"blur"},{min:1,max:15,message:"长度不超过15个字符",trigger:"blur"}]}}},methods:{getStaffList:function(){var t=this;Object(s.d)(this.staffListReq).then(function(e){console.log(e);var a=e.code;100==a?(t.staffListData=e.data,t.page.totalNums=e.page.totalNums,t.page.totalPages=e.page.totalPages):t.$message.error(e.msg+"[错误码："+a+"]")})},addStaff:function(){var t=this;console.log(this.staff),Object(s.a)(this.staff).then(function(e){console.log(e);var a=e.code;100==a?(t.staffListData=e.data,t.getStaffList()):t.$message.error(e.msg+"[错误码："+a+"]"),t.dialogCancel()})},modifyStaff:function(){var t=this;Object(s.h)(this.staff).then(function(e){var a=e.code;100==a?(t.staffListData=e.data,t.getStaffList()):t.$message.error(e.msg+"[错误码："+a+"]"),t.dialogCancel()})},delStaff:function(t){var e=this;this.$confirm("此操作将永久删除该员工数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)({id:t}).then(function(t){var a=t.code;100==a?(e.$message({type:"success",message:"您已删除该员工！"}),e.getStaffList()):e.$message.error(t.msg+"[错误码："+a+"]")})})},quitStaff:function(t){var e=this;this.$confirm("离职员工？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.i)({id:t}).then(function(t){var a=t.code;100==a?(e.$message({type:"success",message:"操作成功！"}),e.getStaffList()):e.$message.error(t.msg+"[错误码："+a+"]")})})},getDepartmentList:function(){var t=this;Object(s.c)().then(function(e){var a=e.code;100==a?t.departmentListData=e.data:t.$message.error(e.msg+"[错误码："+a+"]")})},getStaffTypeList:function(){var t=this;Object(s.g)().then(function(e){var a=e.code;100==a?t.listStaffTypeData=e.data:t.$message.error(e.msg+"[错误码："+a+"]")})},getStaffLevelList:function(){var t=this;Object(s.f)({staffType:this.staff.staffType}).then(function(e){var a=e.code;100==a?t.listStaffLevelData=e.data:t.$message.error(e.msg+"[错误码："+a+"]")})},getStaffDutiesList:function(){var t=this;Object(s.e)().then(function(e){var a=e.code;100==a?t.listStaffDutiesData=e.data:t.$message.error(e.msg+"[错误码："+a+"]")})},openAddStaff:function(){this.staff={},this.dialogOpe.name="新增员工",this.dialogOpe.status=1,this.dialogStaffVisible=!0,this.departmentListData=[],this.getDepartmentList(),this.getStaffTypeList(),this.getStaffDutiesList()},openModifyStaff:function(t){this.staff=t,this.dialogOpe.name="编辑员工",this.dialogOpe.status=2,this.departmentListData=[],this.getDepartmentList(),this.getStaffTypeList(),this.getStaffDutiesList(),this.dialogStaffVisible=!0},searchClick:function(){this.getStaffList()},dialogCancel:function(){this.dialogOpe.name="员工信息",this.dialogOpe.status=0,this.dialogStaffVisible=!1},dialogConfirm:function(t){var e=this;this.$refs.staffRules.validate(function(a){if(!a)return!1;switch(t){case 1:e.addStaff();break;case 2:e.modifyStaff();break;default:e.dialogCancel()}})},handleCurrentChange:function(t){this.getStaffList()},handleSizeChange:function(t){this.staffListReq.size=t,console.log(this.staffListReq.size),this.getStaffList()}},created:function(){this.getStaffList()},watch:{"staffListReq.staffStatus":function(t){this.getStaffList()},"staff.staffType":function(t){1==this.dialogStaffVisible&&null!=this.staff.staffType&&""!=this.staff.staffType&&0!=this.staff.staffType&&this.getStaffLevelList()}}}},238:function(t,e,a){"use strict";a.d(e,"d",function(){return i}),a.d(e,"a",function(){return n}),a.d(e,"h",function(){return l}),a.d(e,"b",function(){return o}),a.d(e,"i",function(){return r}),a.d(e,"c",function(){return u}),a.d(e,"g",function(){return c}),a.d(e,"e",function(){return d}),a.d(e,"f",function(){return p});var s=a(46),f=window.INSIDE_BASE_URL,i=function(t){return s.a.post(f+"/app/staff/listByPage",t).then(function(t){return t.data})},n=function(t){return s.a.post(f+"/app/staff/add",t).then(function(t){return t.data})},l=function(t){return s.a.post(f+"/app/staff/modify",t).then(function(t){return t.data})},o=function(t){return s.a.post(f+"/app/staff/del",t).then(function(t){return t.data})},r=function(t){return s.a.post(f+"/app/staff/quit",t).then(function(t){return t.data})},u=function(t){return s.a.post(f+"/app/department/listAll",t).then(function(t){return t.data})},c=function(t){return s.a.post(f+"/app/staff/listStaffType",t).then(function(t){return t.data})},d=function(t){return s.a.post(f+"/app/staff/listStaffDuties",t).then(function(t){return t.data})},p=function(t){return s.a.post(f+"/app/staff/listStaffLevel",t).then(function(t){return t.data})}},239:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"organize-staff-stafflist"},[a("div",[a("div",{staticClass:"a-admin-head"},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.openAddStaff}},[t._v("新增")]),t._v(" "),a("el-input",{staticStyle:{width:"250px!important","margin-right":"20px"},attrs:{placeholder:"员工编号/姓名/手机号",icon:"search","on-icon-click":t.searchClick},model:{value:t.staffListReq.staffSearch,callback:function(e){t.$set(t.staffListReq,"staffSearch",e)},expression:"staffListReq.staffSearch"}}),t._v(" "),a("el-select",{staticStyle:{width:"80px!important"},model:{value:t.staffListReq.staffStatus,callback:function(e){t.$set(t.staffListReq,"staffStatus",e)},expression:"staffListReq.staffStatus"}},t._l(t.statusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"a-admin-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.staffListData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"staffName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"staffEnName",label:"英文名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"staffCode",label:"编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"staffPhone",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{label:"入职时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-icon",{attrs:{name:"time"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.$util.DateFormat(e.row.staffJoinTime,"yyyy-MM-dd")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(0==e.row.staffStatus?"在职":"离职")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.openModifyStaff(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.delStaff(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.staffStatus,expression:"scope.row.staffStatus == 0"}],attrs:{plain:!0,size:"small",type:"danger"},on:{click:function(a){t.quitStaff(e.row.id)}}},[t._v("离职")])]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.staffListReq.current,"page-sizes":[10,20,50,100],"page-size":t.staffListReq.size,layout:"total, sizes, prev, pager, next",total:t.page.totalNums},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.staffListReq,"current",e)}}})],1),t._v(" "),a("div",[a("el-dialog",{attrs:{title:t.dialogOpe.name,visible:t.dialogStaffVisible},on:{"update:visible":function(e){t.dialogStaffVisible=e}}},[a("el-form",{ref:"staffRules",attrs:{model:t.staff,rules:t.staffRules}},[a("el-form-item",{attrs:{label:"名称",prop:"staffName","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"10字以内"},model:{value:t.staff.staffName,callback:function(e){t.$set(t.staff,"staffName",e)},expression:"staff.staffName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"英文名",prop:"staffEnName","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"10字以内"},model:{value:t.staff.staffEnName,callback:function(e){t.$set(t.staff,"staffEnName",e)},expression:"staff.staffEnName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"员工编号",prop:"staffCode","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"7字以内"},model:{value:t.staff.staffCode,callback:function(e){t.$set(t.staff,"staffCode",e)},expression:"staff.staffCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"staffPhone","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"12字以内"},model:{value:t.staff.staffPhone,callback:function(e){t.$set(t.staff,"staffPhone",e)},expression:"staff.staffPhone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"depId","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.staff.depId,callback:function(e){t.$set(t.staff,"depId",e)},expression:"staff.depId"}},t._l(t.departmentListData,function(t){return a("el-option",{key:t.id,attrs:{label:t.depName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"员工类型",prop:"staffType","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择员工类型"},model:{value:t.staff.staffType,callback:function(e){t.$set(t.staff,"staffType",e)},expression:"staff.staffType"}},t._l(t.listStaffTypeData,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:null!=t.staff.staffType&&""!=t.staff.staffType&&0!=t.staff.staffType,expression:"staff.staffType != null && staff.staffType != '' && staff.staffType != 0"}],attrs:{label:"员工等级",prop:"staffLevel","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择员工等级"},model:{value:t.staff.staffLevel,callback:function(e){t.$set(t.staff,"staffLevel",e)},expression:"staff.staffLevel"}},t._l(t.listStaffLevelData,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"员工职务",prop:"staffDuties","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择员工职务"},model:{value:t.staff.staffDuties,callback:function(e){t.$set(t.staff,"staffDuties",e)},expression:"staff.staffDuties"}},t._l(t.listStaffDutiesData,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"入职时间",prop:"staffJoinTime","label-width":t.formLabelWidth}},[a("el-date-picker",{staticStyle:{width:"215px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.staff.staffJoinTime,callback:function(e){t.$set(t.staff,"staffJoinTime",e)},expression:"staff.staffJoinTime"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dialogCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogConfirm(t.dialogOpe.status)}}},[t._v("确 定")])],1)],1)],1)])},f=[],i={render:s,staticRenderFns:f};e.a=i}});