webpackJsonp([4],{214:function(e,t,a){"use strict";function n(e){a(271)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(273),r=a(274),i=a(78),o=n,u=i(s.a,r.a,!1,o,null,null);t.default=u.exports},220:function(e,t,a){"use strict";a.d(t,"p",function(){return r}),a.d(t,"d",function(){return i}),a.d(t,"x",function(){return o}),a.d(t,"j",function(){return u}),a.d(t,"i",function(){return l}),a.d(t,"q",function(){return c}),a.d(t,"w",function(){return f}),a.d(t,"o",function(){return d}),a.d(t,"u",function(){return p}),a.d(t,"e",function(){return g}),a.d(t,"l",function(){return m}),a.d(t,"a",function(){return h}),a.d(t,"r",function(){return b}),a.d(t,"f",function(){return v}),a.d(t,"m",function(){return R}),a.d(t,"b",function(){return S}),a.d(t,"s",function(){return _}),a.d(t,"g",function(){return y}),a.d(t,"n",function(){return L}),a.d(t,"c",function(){return w}),a.d(t,"t",function(){return q}),a.d(t,"h",function(){return x}),a.d(t,"k",function(){return N}),a.d(t,"v",function(){return z});var n=a(46),s=window.INSIDE_BASE_URL,r=function(e){return n.a.post(s+"/app/user/listByPage",e).then(function(e){return e.data})},i=function(e){return n.a.post(s+"/app/user/add",e).then(function(e){return e.data})},o=function(e){return n.a.post(s+"/app/user/restPwd",e).then(function(e){return e.data})},u=function(e){return n.a.post(s+"/app/user/disable",e).then(function(e){return e.data})},l=function(e){return n.a.post(s+"/app/user/del",e).then(function(e){return e.data})},c=function(e){return n.a.post(s+"/app/user/listStaffByPage",e).then(function(e){return e.data})},f=function(e){return n.a.post(s+"/app/user/relationStaff",e).then(function(e){return e.data})},d=function(e){return n.a.post(s+"/app/user/listRoleByPage",e).then(function(e){return e.data})},p=function(e){return n.a.post(s+"/app/user/relationRole",e).then(function(e){return e.data})},g=function(e){return n.a.post(s+"/app/user/cancelRelationRole",e).then(function(e){return e.data})},m=function(e){return n.a.post(s+"/app/menu/listByPage",e).then(function(e){return e.data})},h=function(e){return n.a.post(s+"/app/menu/add",e).then(function(e){return e.data})},b=function(e){return n.a.post(s+"/app/menu/modify",e).then(function(e){return e.data})},v=function(e){return n.a.post(s+"/app/menu/del",e).then(function(e){return e.data})},R=function(e){return n.a.post(s+"/app/menu/listSubByPage",e).then(function(e){return e.data})},S=function(e){return n.a.post(s+"/app/menu/addSub",e).then(function(e){return e.data})},_=function(e){return n.a.post(s+"/app/menu/modifySub",e).then(function(e){return e.data})},y=function(e){return n.a.post(s+"/app/menu/delSub",e).then(function(e){return e.data})},L=function(e){return n.a.post(s+"/app/role/listByPage",e).then(function(e){return e.data})},w=function(e){return n.a.post(s+"/app/role/add",e).then(function(e){return e.data})},q=function(e){return n.a.post(s+"/app/role/modify",e).then(function(e){return e.data})},x=function(e){return n.a.post(s+"/app/role/del",e).then(function(e){return e.data})},N=function(e){return n.a.post(s+"/app/role/listMenu",e).then(function(e){return e.data})},z=function(e){return n.a.post(s+"/app/role/relationMenu",e).then(function(e){return e.data})}},271:function(e,t,a){var n=a(272);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(202)("134047a3",n,!0)},272:function(e,t,a){t=e.exports=a(201)(!1),t.push([e.i,".manage-user{padding:35px 25px}.manage-user .el-pagination{white-space:nowrap;padding:25px 5px;color:#48576a;text-align:right}.manage-user .yong{width:55%;left:30%;top:12%}",""])},273:function(e,t,a){"use strict";var n=a(220);t.a={data:function(){return{userListReq:{userSearch:"",userStatus:0,current:1,size:10},page:{totalNums:1,totalPages:1},userListData:[],dialogFormVisible:!1,dialogVisible:!1,formLabelWidth:"120px",userAddReq:{loginName:"",userName:"",password:""},dialogOpe:{status:0},statusOptions:[{value:"",label:"全部"},{value:0,label:"正常"},{value:1,label:"停用"}],userOpe:{},dialogStaffVisible:!1,userStaffListReq:{current:1,size:10},pageStaff:{totalNums:1,totalPages:1},userStaffListData:[],relationStaffBean:{userId:"",staffId:""},dialogRoleVisible:!1,userRoleListReq:{current:1,size:10,userId:""},pageRole:{totalNums:1,totalPages:1},userRoleListData:[],userRules:{loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:3,max:15,message:"长度3~15个字符",trigger:"blur"}],userName:[{required:!0,message:"请选输入真实姓名",trigger:"blur"},{min:1,max:15,message:"长度不超过15个字符",trigger:"blur"}],password:[{required:!0,message:"请选输入密码",trigger:"blur"},{min:4,max:15,message:"长度4~15个字符",trigger:"blur"}]}}},methods:{getUserList:function(){var e=this;Object(n.p)(this.userListReq).then(function(t){console.log(t);var a=t.code;100==a?(e.userListData=t.data,e.page.totalNums=t.page.totalNums,e.page.totalPages=t.page.totalPages):e.$message.error(t.msg+"[错误码："+a+"]")})},getUserStaffList:function(){var e=this;Object(n.q)(this.userStaffListReq).then(function(t){console.log(t);var a=t.code;100==a?(e.userStaffListData=t.data,e.pageStaff.totalNums=t.page.totalNums,e.pageStaff.totalPages=t.page.totalPages):e.$message.error(t.msg+"[错误码："+a+"]")})},getUserRoleList:function(){var e=this;Object(n.o)(this.userRoleListReq).then(function(t){console.log(t);var a=t.code;100==a?(e.userRoleListData=t.data,e.pageRole.totalNums=t.page.totalNums,e.pageRole.totalPages=t.page.totalPages):e.$message.error(t.msg+"[错误码："+a+"]")})},addUser:function(){var e=this;Object(n.d)(this.userAddReq).then(function(t){console.log(t);var a=t.code;100==a?(e.$message({type:"success",message:"新增用户成功！"}),e.getUserList()):e.$message.error(t.msg+"[错误码："+a+"]")})},restPwd:function(e){var t=this;this.$confirm("是否重置该用户密码？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.x)({userId:e}).then(function(e){var a=e.code;100==a?t.$message({type:"success",message:"密码重置成功！默认密码：gt123456"}):t.$message.error(e.msg+"[错误码："+a+"]")})})},disableUser:function(e){var t=this;this.$confirm("是否停用用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.j)({userId:e}).then(function(e){var a=e.code;100==a?(t.$message({type:"success",message:"操作成功！"}),t.getUserList()):t.$message.error(e.msg+"[错误码："+a+"]")})})},delUser:function(e){var t=this;this.$confirm("删除用户后数据不可恢复，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.i)({userId:e}).then(function(e){var a=e.code;100==a?(t.$message({type:"success",message:"删除成功！"}),t.getUserList()):t.$message.error(e.msg+"[错误码："+a+"]")})})},relationStaff:function(){var e=this;console.log(this.relationStaffBean),Object(n.w)(this.relationStaffBean).then(function(t){var a=t.code;100==a?(e.$message({type:"success",message:"关联员工成功！"}),e.getUserList()):203==a?e.$message.error("该员工已关联其他用户！"):e.$message.error(t.msg+"[错误码："+a+"]")})},relationRole:function(e){var t=this,a=this.userRoleListReq.userId;this.$confirm("确定关联角色到该用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.u)({userId:a,roleId:e}).then(function(e){var a=e.code;100==a?(t.$message({type:"success",message:"关联成功！"}),t.getUserRoleList(),t.getUserList()):t.$message.error(e.msg+"[错误码："+a+"]")})})},cancelRelationRole:function(e){var t=this,a=this.userRoleListReq.userId;this.$confirm("确定取消关联角色到该用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.e)({userId:a,roleId:e}).then(function(e){var a=e.code;100==a?(t.$message({type:"success",message:"取消关联成功！"}),t.getUserRoleList(),t.getUserList()):t.$message.error(e.msg+"[错误码："+a+"]")})})},searchClick:function(){this.getUserList()},changeStatus:function(){this.getUserList()},openAddUser:function(){this.dialogOpe.name="新增用户",this.userAddReq={},this.dialogFormVisible=!0,this.dialogOpe.status=1},dialogConfirm:function(e){var t=this;this.$refs.userRules.validate(function(a){if(!a)return!1;1==e?(t.dialogFormVisible=!1,t.addUser()):2==e&&(t.dialogFormVisible=!1)})},handleCurrentChange:function(e){console.log("handleCurrentChange"),this.getUserList()},handleSizeChange:function(e){this.userListReq.size=e,console.log(this.userListReq.size),console.log("handleSizeChange"),this.getUserList()},relation:function(e){this.dialogVisible=!0,this.userOpe=e,this.relationStaffBean.userId=e.userId,this.userRoleListReq.userId=e.userId},toRelationStaff:function(){this.getUserStaffList(),this.dialogStaffVisible=!0,this.dialogVisible=!1},saveStaff:function(){this.relationStaff(),this.dialogStaffVisible=!1,this.dialogVisible=!1},handleStaffCurrentChange:function(e){this.getUserStaffList()},handleStaffSizeChange:function(e){this.userStaffListReq.size=e,this.getUserStaffList()},handleStaffTableChange:function(e){console.log(e),null!=e&&(this.relationStaffBean.staffId=e.id,this.userOpe.staffName=e.staffName)},toRelationRole:function(){this.getUserRoleList(),this.dialogRoleVisible=!0,this.dialogVisible=!1},handleRoleCurrentChange:function(e){this.getUserRoleList()},handleRoleSizeChange:function(e){this.userRoleListReq.size=e,this.getUserRoleList()}},created:function(){this.getUserList()}}},274:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manage-user"},[a("div",[a("div",{staticStyle:{"margin-bottom":"35px"}},[a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:e.openAddUser}},[e._v("新增")]),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"登录账号/真实姓名",icon:"search","on-icon-click":e.searchClick},model:{value:e.userListReq.userSearch,callback:function(t){e.$set(e.userListReq,"userSearch",t)},expression:"userListReq.userSearch"}}),e._v(" "),a("el-select",{staticStyle:{width:"80px!important"},on:{change:e.changeStatus},model:{value:e.userListReq.userStatus,callback:function(t){e.$set(e.userListReq,"userStatus",t)},expression:"userListReq.userStatus"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userListData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginName",label:"登录账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"真实姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"staffName",label:"员工姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userStatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(0==t.row.userStatus?"正常":"停用")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-icon",{attrs:{name:"createTime"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.$util.DateFormat(t.row.createTime,"yyyy-MM-dd hh:mm")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.relation(t.row)}}},[e._v("关联")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.restPwd(t.row.userId)}}},[e._v("重置密码")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.disableUser(t.row.userId)}}},[e._v("停用")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.delUser(t.row.userId)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.userListReq.current,"page-sizes":[10,20,50,100],"page-size":e.userListReq.size,layout:"total, sizes, prev, pager, next",total:e.page.totalNums},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.userListReq,"current",t)}}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogOpe.name,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"userRules",attrs:{model:e.userAddReq,rules:e.userRules}},[a("el-form-item",{attrs:{label:"登录账号：",prop:"loginName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入3到15字的登录账号"},model:{value:e.userAddReq.loginName,callback:function(t){e.$set(e.userAddReq,"loginName",t)},expression:"userAddReq.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名：",prop:"userName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入15字以内的真实姓名"},model:{value:e.userAddReq.userName,callback:function(t){e.$set(e.userAddReq,"userName",t)},expression:"userAddReq.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码：",prop:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入4到15字的密码"},model:{value:e.userAddReq.password,callback:function(t){e.$set(e.userAddReq,"password",t)},expression:"userAddReq.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogConfirm(e.dialogOpe.status)}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{staticClass:"yong",attrs:{title:"关联信息",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-button",{attrs:{type:"primary"},on:{click:e.toRelationStaff}},[e._v("关联员工")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.toRelationRole}},[e._v("关联角色")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"关联员工",visible:e.dialogStaffVisible},on:{"update:visible":function(t){e.dialogStaffVisible=t}}},[a("el-table",{attrs:{data:e.userStaffListData,"highlight-current-row":""},on:{"current-change":e.handleStaffTableChange}},[a("el-table-column",{attrs:{prop:"staffName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"staffEnName",label:"英文名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"staffCode",label:"编号"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.userStaffListReq.current,"page-sizes":[10,20,50,100],"page-size":e.userStaffListReq.size,layout:"total, sizes, prev, pager, next",total:e.pageStaff.totalNums},on:{"size-change":e.handleStaffSizeChange,"current-change":e.handleStaffCurrentChange,"update:currentPage":function(t){e.$set(e.userStaffListReq,"current",t)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:null!=e.userOpe.staffName,expression:"userOpe.staffName != null"}]},[e._v("当前关联的员工："+e._s(e.userOpe.staffName))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:null!=e.userOpe.staffName,expression:"userOpe.staffName != null"}],staticStyle:{"margin-left":"15px","margin-top":"25px"},attrs:{type:"primary"},on:{click:e.saveStaff}},[e._v("保存选择")])],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"关联角色",visible:e.dialogRoleVisible},on:{"update:visible":function(t){e.dialogRoleVisible=t}}},[a("el-table",{attrs:{data:e.userRoleListData,"highlight-current-row":""},on:{"current-change":e.handleStaffTableChange}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(0==t.row.rolePower?"正常":"最高权限")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleRemark",label:"角色描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(0==t.row.userHas?"已关联":"未关联")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.userHas?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.relationRole(t.row.roleId)}}},[e._v("关联")]):e._e(),e._v(" "),0==t.row.userHas?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.cancelRelationRole(t.row.roleId)}}},[e._v("取消关联")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.userRoleListReq.current,"page-sizes":[10,20,50,100],"page-size":e.userRoleListReq.size,layout:"total, sizes, prev, pager, next",total:e.pageRole.totalNums},on:{"size-change":e.handleRoleSizeChange,"current-change":e.handleRoleCurrentChange,"update:currentPage":function(t){e.$set(e.userRoleListReq,"current",t)}}})],1)],1)])},s=[],r={render:n,staticRenderFns:s};t.a=r}});